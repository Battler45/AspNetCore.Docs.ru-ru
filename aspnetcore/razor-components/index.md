---
title: Введение в компоненты Razor
author: guardrex
description: Изучите Blazor, веб-платформу .NET с C#/Razor и HTML, которая выполняется в браузере с WebAssembly.
monikerRange: '>= aspnetcore-3.0'
ms.author: riande
ms.custom: mvc
ms.date: 01/29/2019
uid: razor-components/index
ms.openlocfilehash: 0f7a4b2ec404b6ceec2e643fea9e0635de6ad716
ms.sourcegitcommit: ed76cc752966c604a795fbc56d5a71d16ded0b58
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/02/2019
ms.locfileid: "55667938"
---
# <a name="introduction-to-razor-components"></a>Введение в компоненты Razor

Авторы: [Стив Сандерсон (Steve Sanderson)](http://blog.stevensanderson.com), [Дэниэл Рот (Daniel Roth)](https://github.com/danroth27) и [Люк Лэтем (Luke Latham)](https://github.com/guardrex)

[!INCLUDE[](~/includes/razor-components-preview-notice.md)]

*Компоненты Razor для ASP.NET Core* выполняются в ASP.NET Core со стороны сервера, а *Blazor* (компоненты Razor на стороне клиенте) — это экспериментальная веб-платформа .NET с C#/Razor и HTML, которая выполняется в браузере с WebAssembly. Blazor предоставляет все преимущества клиентской веб-платформы пользовательского интерфейса с .NET на стороне клиента.

Разработка веб-приложений с годами улучшилась по многим показателям, но создание современных веб-приложений по-прежнему представляет сложности. Использование .NET в браузере дает множество преимуществ, которые могут упростить веб-разработку и повысить ее продуктивность:

* **Стабильность и согласованность**: .NET предоставляет стандартизированные платформы программирования, которые отличаются стабильностью, большим количеством функций и простотой в использовании.
* **Современные инновационные языки**: языки .NET постоянно улучшаются и дополняются инновационными функциями.
* **Ведущее в отрасли средства**: семейство продуктов Visual Studio предоставляет потрясающий опыт разработки .NET на платформах Windows, Linux и macOS.
* **Скорость и масштабируемость**: платформа .NET доказала свою производительность, надежность и безопасность для разработки приложений. Использование .NET в качестве решения полного стека упрощает создание быстрых, надежных и безопасных приложений.
* **Полностековая разработка, которая использует имеющиеся навыки**: разработчики C#/ Razor используют свои навыки для написания клиентского кода и совместного использования сервера и клиентской логики между приложениями.
* **Поддержка различных браузеров**: компоненты Razor отрисовывают пользовательский интерфейс как обычную разметку и JavaScript. Blazor работает в среде .NET в браузере, используя открытые веб-стандарты без подключаемых модулей и транспиляции кода. Blazor работает во всех современных веб-браузерах, включая браузеры мобильных устройств.

## <a name="hosting-models"></a>Модели размещения

### <a name="server-side-hosting-model"></a>Модель размещения на сервере

Так как компоненты Razor отделяют логику отрисовки компонента от применения обновлений пользовательского интерфейса, их можно размещать разными способами. Компоненты Razor для ASP.NET Core в .NET Core 3.0 добавляют поддержку размещения компонентов Razor на сервере в приложении ASP.NET Core, где все обновления пользовательского интерфейса обрабатываются через подключение SignalR. Среда выполнения обрабатывает события отправки пользовательского интерфейса из браузера на сервер, а затем применяет обновления пользовательского интерфейса, отправленные сервером обратно в браузер после выполнения компонентов. То же подключение используется для обработки вызовов взаимодействия JavaScript.

![Компоненты Razor выполняют код .NET на сервере и взаимодействуют с моделью DOM на стороне клиента через подключение SignalR](index/_static/aspnet-core-razor-components.png)

Для получения дополнительной информации см. <xref:razor-components/hosting-models#server-side-hosting-model>.

### <a name="client-side-hosting-model"></a>Модель размещения на стороне клиента

Выполнение кода .NET внутри веб-браузеров становится возможным благодаря сравнительно новой технологии [WebAssembly](http://webassembly.org) (сокращенно *wasm*). WebAssembly — это открытый веб-стандарт, который поддерживается в веб-браузерах без подключаемых модулей. WebAssembly — это компактный формат байт-кода, оптимизированный для быстрой загрузки и максимального быстродействия.

Код WebAssembly может использовать все возможности браузера с помощью взаимодействия с JavaScript. В то же время код WebAssembly выполняется в той же доверенной песочнице, что и JavaScript, для предотвращения вредоносных действий на клиентском компьютере.

![Blazor выполняет код .NET в браузере с WebAssembly.](index/_static/blazor.png)

Когда приложение Blazor создано и запущено в браузере:

1. Файлы кода C# и файлы Razor компилируются в сборки .NET.
1. Сборки и среда выполнения .NET загружаются в браузер.
1. Blazor использует JavaScript для начальной загрузки среды выполнения .NET и настраивает среду выполнения для загрузки необходимых ссылок сборки. Операции с моделью DOM и вызовы API браузера обрабатываются средой выполнения Blazor через взаимодействие JavaScript.

Для поддержки старых браузеров без WebAssembly можно использовать [модель размещения со стороны сервера](#server-side-hosting-model) в компонентах Razor для ASP.NET Core.

Для получения дополнительной информации см. <xref:razor-components/hosting-models#client-side-hosting-model>.

## <a name="components"></a>Компоненты

Приложения создаются с использованием *компонентов*. Компонент — это часть пользовательского интерфейса, например страница, диалоговое окно или форма ввода данных. Компоненты можно вкладывать друг в друга, использовать повторно и сразу в нескольких проектах.

*Компонент* — это класс .NET. Этот класс может записываться напрямую, как класс C# (*\*.cs*), или чаще в форме разметки страницы Razor (*\*.cshtml*).

[Razor](/aspnet/core/mvc/views/razor) — это синтаксис для объединения разметки HTML с кодом C#. Razor предназначен для повышения производительности разработчика и позволяет разработчику переключаться между разметкой и C# в одном файле с поддержкой [IntelliSense](/visualstudio/ide/using-intellisense). Следующая разметка является примером базового настраиваемого диалогового компонента в файле Razor (*DialogComponent.cshtml*):

```cshtml
<div>
    <h2>@Title</h2>
    @BodyContent
    <button onclick=@OnOK>OK</button>
</div>

@functions {
    public string Title { get; set; }
    public RenderFragment BodyContent { get; set; }
    public Action OnOK { get; set; }
}
```

Когда этот компонент используется в другом месте в приложении, IntelliSense ускоряет разработку с помощью выполнения синтаксиса и параметров.

Компоненты:

* Бывают вложенными.
* Создаются с Razor (*\*.cshtml*) или кодом C# (*\*.cs*).
* Совместно используются через библиотеки классов.
* Подлежат модульному тестированию без модели DOM браузера.

## <a name="infrastructure"></a>Инфраструктура

Компоненты Razor предоставляют основные средства, которые требуются большинству приложений, включая:

* Макеты
* Маршрутизация
* Внедрение зависимостей

Все эти функции необязательны. Если одна из этих функций не используется в приложении, реализация исключается из приложения при публикации [компоновщиком промежуточного языка (IL)](xref:host-and-deploy/razor-components/configure-linker).

## <a name="code-sharing-and-net-standard"></a>Совместное использование кода и .NET Standard

Приложения могут ссылаться и использовать существующие библиотеки [.NET Standard](/dotnet/standard/net-standard). .NET Standard — это формальная спецификация API-интерфейсов .NET, которые доступны во всех реализациях .NET. Поддерживается .NET standard 2.0 или более поздней версии. API, которые неприменимы внутри веб-браузера (например, доступ к файловой системе, открытие сокета, работа с потоками и другие функции), выдают исключение [PlatformNotSupportedException](/dotnet/api/system.platformnotsupportedexception). Библиотеки классов .NET Standard могут использоваться совместно в серверном коде и приложениях на основе браузера.

## <a name="javascript-interop"></a>Взаимодействие с JavaScript

Для приложений, требующих сторонние библиотеки JavaScript и API-интерфейсы браузера, WebAssembly взаимодействует с JavaScript. Компоненты Razor могут использовать любую библиотеку или API, которые может использовать JavaScript. Код C# может вызывать код JavaScript, а код JavaScript — код C#. Дополнительные сведения см. в разделе [Взаимодействие с JavaScript](xref:razor-components/javascript-interop).

## <a name="optimization"></a>Оптимизация

Для клиентских приложений размер полезных данных очень важен. Blazor оптимизирует размер полезных данных, чтобы сократить время загрузки. Например, неиспользуемые части сборки .NET удаляются во время сборки, HTTP-ответы сжимаются, а среда выполнения .NET и сборки кэшируются в браузере.

Компоненты Razor предоставляют даже меньший размер полезных данных, чем Blazor, поддерживая сборки .NET, сборку приложения и среду выполнения на стороне сервера. Приложения компонентов Razor передают клиентам только разметку, скрипты и таблицы стилей.

## <a name="deployment"></a>Развертывание

Используйте Blazor для создания полностью изолированного клиентского приложения или полностекового приложения ASP.NET Core, которое содержит серверное и клиентское приложения:

* В **изолированном клиентском приложении** приложение Blazor компилируется в папке *dist*, которая содержит только статические файлы. Файлы можно размещать в службе приложений Azure, страницах GitHub, IIS (настроено как статический файловый сервер), серверы Node.js и многих других серверах и службах. .NET не требуется на сервере в рабочей среде.
* В **полностековом приложении ASP.NET Core** код может совместно использоваться серверными и клиентскими приложениями. Итоговое приложение компонентов Razor в ASP.NET Core, обеспечивающее пользовательский интерфейс на стороне клиента и другие конечные точки API на стороне сервера, можно собрать и развернуть в любом облаке или на локальном узле, поддерживаемом ASP.NET Core.

## <a name="suggest-a-feature-or-file-a-bug-report"></a>Предложение функции или отправка отчета об ошибках

Чтобы поделиться идеями или отправить отчет об ошибках, [откройте проблему](https://github.com/aspnet/AspNetCore/issues/new). Чтобы получить помощь или ответы от сообщества, присоединяйтесь к обсуждению на [Gitter](https://gitter.im/aspnet/Blazor).

## <a name="additional-resources"></a>Дополнительные ресурсы

* [WebAssembly](http://webassembly.org/)
* [Руководство по языку C#](/dotnet/csharp/)
* [Razor](/aspnet/core/mvc/views/razor)
* [HTML](https://www.w3.org/html/)
