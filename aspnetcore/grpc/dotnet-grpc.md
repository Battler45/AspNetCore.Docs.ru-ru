---
title: Управление ссылками protobuf с помощью DotNet-GRPC
author: juntaoluo
description: Сведения о добавлении, обновлении, удалении и перечислении ссылок protobuf с помощью глобального инструмента DotNet-GRPC.
monikerRange: '>= aspnetcore-3.0'
ms.author: johluo
ms.date: 09/24/2019
uid: grpc/dotnet-grpc
ms.openlocfilehash: ebd57419be24f7f4ed9765e36cf14189be8438b1
ms.sourcegitcommit: 020c3760492efed71b19e476f25392dda5dd7388
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/12/2019
ms.locfileid: "72290049"
---
# <a name="manage-protobuf-references-with-dotnet-grpc"></a>Управление ссылками protobuf с помощью DotNet-GRPC

Автор: [John Luo](https://github.com/juntaoluo) (Джон Луо)

`dotnet-grpc` — это глобальное средство .NET Core для управления ссылками protobuf в проекте .NET gRPC. Это средство можно использовать для добавления, обновления, удаления и перечисления ссылок protobuf.

## <a name="installation"></a>Установка

Чтобы установить глобальное средство `dotnet-grpc` [.NET Core](/dotnet/core/tools/global-tools), выполните следующую команду:

```dotnetcli
dotnet tool install -g dotnet-grpc
```

## <a name="add-references"></a>Добавление ссылок

`dotnet-grpc` можно использовать для добавления ссылок protobuf в виде `<Protobuf />` элементов в файл *. csproj* :

```xml
<Protobuf Include="..\Proto\count.proto" GrpcServices="Server" Link="Protos\count.proto" />
```

Ссылки protobuf используются для создания ресурсов C# клиента и/или сервера. @No__t 0tool может:

* Создайте ссылку на protobuf из локальных файлов на диске.
* Создание ссылки protobuf из удаленного файла, указанного с помощью URL-адреса.
* Убедитесь, что в проект добавлены правильные зависимости пакета gRPC.

Например, пакет `Grpc.AspNetCore` добавляется в веб-приложение. `Grpc.AspNetCore` содержит серверные и клиентские библиотеки gRPC и поддержку инструментария. Кроме того, в консольное приложение добавляются пакеты `Grpc.Net.Client`, `Grpc.Tools` и `Google.Protobuf`, которые содержат только клиентские библиотеки gRPC и средства поддержки средств.

### <a name="add-file"></a>Добавить файл

Команда `add-file` используется для добавления локальных файлов на диске в качестве ссылок protobuf. Предоставленные пути к файлам:

* Может быть относительным по отношению к текущему каталогу или абсолютным путям.
* Может содержать подстановочные знаки для файла [глобализации](https://wikipedia.org/wiki/Glob_(programming))на основе шаблона.

Если какие-либо файлы находятся за пределами каталога проекта, добавляется элемент `Link` для отображения файла в папке `Protos` в Visual Studio.

### <a name="usage"></a>Использование

```dotnetcli
dotnet grpc add-file [options] <files>...
```

#### <a name="arguments"></a>Аргументы

| Аргумент | Описание |
|-|-|
| files | Ссылка на файл protobuf. Это может быть путь к стандартная маска для локальных файлов protobuf. |

#### <a name="options"></a>Параметры

| Короткий параметр | Длинный параметр | Описание |
|-|-|-|
| -p | --проект | Путь к файлу проекта для обработки. Если файл не указан, команда ищет его в текущем каталоге.
| -s | --службы | Тип gRPC служб, которые должны быть созданы. Если задано значение `Default`, для веб-проектов используется `Both`, а для проектов, не являющихся веб-проектами, используется `Client`. Допустимые значения: `Both`, `Client`, `Default`, `None`, `Server`.
| -i | --reimports-dirs | Дополнительные каталоги, которые будут использоваться при разрешении импортов для файлов protobuf. Это список путей, разделенных точкой с запятой.
| | --доступ | Модификатор доступа, используемый для создаваемых C# классов. Значение по умолчанию — `Public`. Допустимые значения: `Internal` и `Public`.

### <a name="add-url"></a>Добавить URL-адрес

Команда `add-url` используется для добавления удаленного файла, заданного исходным URL-адресом, в качестве ссылки protobuf. Для указания места загрузки удаленного файла необходимо указать путь к файлу. Путь к файлу может относиться к текущему каталогу или абсолютному пути. Если путь к файлу находится за пределами каталога проекта, добавляется элемент `Link` для отображения файла в виртуальной папке `Protos` в Visual Studio.

### <a name="usage"></a>Использование

```dotnetcli
dotnet-grpc add-url [options] <url>
```

#### <a name="arguments"></a>Аргументы

| Аргумент | Описание |
|-|-|
| url | URL-адрес удаленного файла protobuf. |

#### <a name="options"></a>Параметры

| Короткий параметр | Длинный параметр | Описание |
|-|-|-|
| -o | --выходные данные | Указывает путь загрузки для удаленного файла protobuf. Это обязательный параметр.
| -p | --проект | Путь к файлу проекта для обработки. Если файл не указан, команда ищет его в текущем каталоге.
| -s | --службы | Тип gRPC служб, которые должны быть созданы. Если задано значение `Default`, для веб-проектов используется `Both`, а для проектов, не являющихся веб-проектами, используется `Client`. Допустимые значения: `Both`, `Client`, `Default`, `None`, `Server`.
| -i | --reimports-dirs | Дополнительные каталоги, которые будут использоваться при разрешении импортов для файлов protobuf. Это список путей, разделенных точкой с запятой.
| | --доступ | Модификатор доступа, используемый для создаваемых C# классов. Значение по умолчанию — `Public`. Допустимые значения: `Internal` и `Public`.

## <a name="remove"></a>Удалить

Команда `remove` используется для удаления ссылок protobuf из *CSPROJ* -файла. Команда принимает аргументы пути и URL-адреса источника в качестве аргументов. Средство:

* Удаляет только ссылку protobuf.
* Не удаляет файл с *расширением.* , даже если он был первоначально скачан с удаленного URL-адреса.

### <a name="usage"></a>Использование

```dotnetcli
dotnet-grpc remove [options] <references>...
```

### <a name="arguments"></a>Аргументы

| Аргумент | Описание |
|-|-|
| ссылки | URL-адреса или пути к файлам удаляемых ссылок protobuf. |

### <a name="options"></a>Параметры

| Короткий параметр | Длинный параметр | Описание |
|-|-|-|
| -p | --проект | Путь к файлу проекта для обработки. Если файл не указан, команда ищет его в текущем каталоге.

## <a name="refresh"></a>Обновление

Команда `refresh` используется для обновления удаленной ссылки последним содержимым из исходного URL-адреса. Для указания обновляемой ссылки можно использовать как путь к файлу загрузки, так и URL-адрес источника. Примечание.

* Хэши содержимого файла сравниваются, чтобы определить, следует ли обновлять локальный файл.
* Сведения о метке времени не сравниваются.

Средство всегда заменяет локальный файл удаленным, если требуется обновление.

### <a name="usage"></a>Использование

```dotnetcli
dotnet-grpc refresh [options] [<references>...]
```

### <a name="arguments"></a>Аргументы

| Аргумент | Описание |
|-|-|
| ссылки | URL-адреса или пути к файлам для удаленных ссылок protobuf, которые должны быть обновлены. Оставьте этот аргумент пустым, чтобы обновить все удаленные ссылки. |

### <a name="options"></a>Параметры

| Короткий параметр | Длинный параметр | Описание |
|-|-|-|
| -p | --проект | Путь к файлу проекта для обработки. Если файл не указан, команда ищет его в текущем каталоге.
| | --пробное выполнение | Выводит список файлов, которые будут обновлены без скачивания нового содержимого.

## <a name="list"></a>List

Команда `list` используется для вывода всех ссылок на protobuf в файле проекта. Если все значения столбца являются значениями по умолчанию, столбец можно опустить.

### <a name="usage"></a>Использование

```dotnetcli
dotnet-grpc list [options]
```

### <a name="options"></a>Параметры

| Короткий параметр | Длинный параметр | Описание |
|-|-|-|
| -p | --проект | Путь к файлу проекта для обработки. Если файл не указан, команда ищет его в текущем каталоге.

## <a name="additional-resources"></a>Дополнительные ресурсы

* <xref:grpc/index>
* <xref:grpc/basics>
* <xref:grpc/aspnetcore>
